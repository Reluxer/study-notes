#组合游戏#

##组合游戏的一般定义##

- 游戏有两名参与者。
- 起始位置确定时，游戏可以到达的位置是有限的。
- 游戏的规则是确定的，也就是游戏从一个位置能够通过一步移动到哪些位置是确定的。
- 游戏的两名参与者轮流移动游戏的位置。
- 起始位置确定时，游戏一定可以在有限次移动之后结束。

##一些定义##

- P位置：上一玩家(Previous Player)获胜的位置。
- N位置：下一玩家(Next Player)获胜的位置。
- 结束位置：由游戏的规则所确定的位置，如果游戏处于结束位置，就不能再向其他位置移动了。
- 普通组合游戏：结束位置是P位置的组合游戏。在下文中，如果不加说明，指的都是这种游戏。
- Misère游戏：结束位置是N位置的游戏。
- 必败点：前一个选手将取胜的位置称为必败点。
- 必胜点：下一个选手将取胜的位置称为必胜点。  
*“必胜”和”必败“都是针对下一玩家而言的。*

##P位置和N位置的计算##

在普通博弈游戏（Misère游戏类似）中，P位置和N位置的计算方法如下：

1. 把所有的结束位置标记为P位置；
2. 把能够一步移动到P位置的位置标记为N位置；
3. 把通过一步只能移动到N位置的位置标记为P位置；
4. 如果在上一步没有位置被标记为P位置，算法结束；否则，转到第二步。

##P位置和N位置的性质##

在普通博弈游戏中，有如下性质：

- 所有的结束位置都是P位置；
- 从任意一个N位置出发，通过一步一定能到达某个P位置。
- 从任意一个P位置出发，只移动一步所到达的只能是N位置。

当游戏处在P位置时，无论下一玩家怎样移动，都只能移动到N位置；而当游戏处于N位置时，下一玩家一定有办法移动到P位置。在游戏中两名玩家轮流执行移动的过程，也是游戏在N位置与P位置之间轮流变换的过程。由于在普通组合游戏中，终止位置是P位置，移动到终止位置的玩家获胜，所以P位置是上一玩家获胜的位置，N位置是下一玩家获胜的位置。P位置和N位置确定后，拥有必胜策略的玩家所采取的策略也就确定了：每次轮到他执行移动时，只需要把游戏移动到P位置。

##分析方法##

**向后归纳(Backward Induction)**：从游戏的结束位置开始，向开始位置的方向分析。后面所提到的所有游戏，几乎都是按照这种方法来分析的。

##取石子游戏##

###描述###

游戏的参与者共有两名，为了描述方便，下面我们将用玩家I和玩家II分别表示这两名参与者。  
现有21枚石子摆成一堆，放在两名玩家面前。  
由玩家I开始，两名玩家轮流从石子堆中拿走石子。在每一轮中，每个玩家最少要拿走一枚石子，最多可以拿走三枚石子。  
拿到最后一枚石子的玩家获胜。

###向后归纳分析###

当没有石子时，根据游戏规则上一个取石子的玩家（下面将用上一玩家代替这个称呼，同样，下一玩家将用来代表下一个将要取石子的玩家）获胜。  
当堆中还剩1，2或3枚石子时，下一玩家可以把石子剩下的全部拿走，从而获胜。  
当堆中剩4枚石子时，不管下一玩家拿走几枚石子，剩下的石子数只可能是1，2或3，也就是说剩4枚石子时的上一玩家可以在下次轮到他时把所有石子取走获胜。  
由于4枚石子是可以使上一玩家获胜的位置，所以让堆中只剩4枚石子的玩家可以获胜。因此当堆里还剩5，6或7枚石子时，下一玩家可以拿走若干石子，使堆里只剩4枚石子，进而获胜。  
当堆里有8枚石子时，无论下一玩家拿走几枚石子，都将使上一玩家获胜。

###问题的解###

从上面的分析中可以发现：0，4，8，...，4n是这个游戏的目标位置，只要一个玩家在完成自己的操作（在这个游戏中是取1－3枚石子）后，使游戏处在这些位置上，那么这名玩家就能获胜。于是我们说这些位置是使上一玩家获胜的位置。而其他位置是使下一玩家获胜的位置。  
游戏开始时有21枚石子，21不能被4整除，所以游戏的起始位置是下一玩家获胜的位置。下一玩家是玩家I，所以他会获胜。

##减法游戏##

###定义###

> 用s表示一个正整数构成的集合，基于S所定义的减法游戏可以描述如下：	有一个由n个石子组成的石子
堆，两名玩家轮流从中拿走石子，每次拿走石子的个数只能是集合S中的数。拿走最后一枚石子的玩家获胜。

###例###

S = {1, 3, 4}，如果在游戏的开始有100枚石子，那么哪个玩家获胜？  

使用向后归纳的方法，可以计算出游戏的P位置和N位置如下：

	       X: 0 1 2 3 4 5 6 7 8 9 10 11 12 ...
	Position: P N P N N N N P N P N  N  N  ...

通过观察发现，该游戏中的P位置是那些能被7整除或者模7余2的位置，其他位置都是N位置。用数学归纳法可以证明这个结论是正确的。  
游戏的起始位置100是P位置，所以玩家I输。

##清空/分割游戏##

###描述###

进行游戏需要用到两个盒子。在游戏的开始，第一个盒子中有n枚石子，第二个盒子中有m个石子(n, m > 0)。参与游戏的两名玩家轮流执行这样的操作：清空一个盒子中的石子，然后从另一个盒子中拿若干石子到被清空的盒子中，使得最后两个盒子都不空。当两个盒子中都只有一枚石子时，游戏结束。最后成功执行操作的玩家获胜。找出游戏中所有的P位置。

###解###

对于一个位置(x, y)来说，如果x, y中有一个偶数，那么(x, y)是N位置。如果x和y都是奇数，那么(x, y)是P位置。可以用数学归纳法证明。

##巧克力游戏##

###描述###

有一块长方形的巧克力，它由n*m块格子组成。两名玩家轮流选择一个格子，并把这个格子右面，上面和由上方的巧克力全部取走。取到左下角格子的玩家输。  
下图可以看作是一个3＊8的巧克力被拿掉(2, 6)和(3, 2)两块后剩下的形状：

![](/pics/巧克力游戏.png?raw=true)

###问题###

- 证明：前面图片中的位置的是N位置，并给出能使下一玩家获胜的策略。
- 证明：形状为长方形的位置（不包括只剩左下角格子的情况）是N位置。

###证明###

证明一：一个必胜的策略是拿走(1, 3)位置的格子。

证明二：用反证法，假设在某个长方形是P位置。下一玩家可以只拿走最右上角的一块。根据假设，他的对手可以取走一块(x, y)使游戏回到P位置。可以发现，在游戏开始时，下一玩家可以直接拿走(x, y)到达相同的位置，从而获胜。这于前面的假设矛盾。所以长方形的位置是N位置。
